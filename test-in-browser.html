<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Challenge Matching Test</title>
  <style>
    body {
      font-family: system-ui, -apple-system, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #fefbea;
    }
    .test-case {
      background: white;
      padding: 20px;
      margin: 20px 0;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    button {
      background: #FFD678;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 500;
      margin-top: 10px;
    }
    button:hover {
      background: #ffcc5c;
    }
    .result {
      margin-top: 15px;
      padding: 15px;
      background: #f5f5f5;
      border-radius: 6px;
    }
    .challenge {
      margin: 10px 0;
      padding: 10px;
      background: white;
      border-left: 3px solid #FFD678;
    }
    h3 { margin-top: 0; color: #3E3E3E; }
    .task { color: #5E5E5E; margin: 5px 0; }
  </style>
</head>
<body>
  <h1>üß™ Challenge Matching Test</h1>
  <p>Open browser console (F12) to see detailed logs</p>

  <div class="test-case">
    <h3>Test: Deadline Pressure</h3>
    <div class="task">Task: "Working on homepage redesign"</div>
    <div class="task">Notes: "Feeling stressed about the deadline pressure"</div>
    <button onclick="testDeadlinePressure()">Run Test</button>
    <div id="result1" class="result" style="display:none;"></div>
  </div>

  <div class="test-case">
    <h3>Test: Cursor/Tool Frustration</h3>
    <div class="task">Task: "Building component library with Cursor"</div>
    <div class="task">Notes: "Hard to control Cursor, keeps giving wrong results"</div>
    <button onclick="testCursorFrustration()">Run Test</button>
    <div id="result2" class="result" style="display:none;"></div>
  </div>

  <div class="test-case">
    <h3>Test: Stuck on Problem</h3>
    <div class="task">Task: "Trying to design the checkout flow"</div>
    <div class="task">Notes: "Feeling stuck and no progress today"</div>
    <button onclick="testStuck()">Run Test</button>
    <div id="result3" class="result" style="display:none;"></div>
  </div>

  <script type="module">
    // Import from your actual compiled source
    // You'll need to run 'npm run dev' first, then open http://localhost:5173/test-in-browser.html
    
    import { matchChallengesToInput } from './src/utils/hybridChallengeMatchingService.ts'

    const createMockEntry = (tasks) => ({
      id: 'test-entry',
      date: new Date().toISOString().split('T')[0],
      tasks: tasks.map((task, i) => ({
        id: `task-${i}`,
        projectId: 'project-1',
        description: task.description,
        taskType: 'visual-design',
        emotion: task.emotion,
        emotions: [task.emotion],
        notes: task.notes,
        createdAt: new Date()
      })),
      createdAt: new Date(),
      updatedAt: new Date()
    })

    const displayResults = (challenges, resultId) => {
      const resultDiv = document.getElementById(resultId)
      resultDiv.style.display = 'block'
      
      if (challenges.length === 0) {
        resultDiv.innerHTML = '<p>‚ùå No challenges found</p>'
        return
      }

      let html = `<p><strong>‚úÖ Found ${challenges.length} challenge(s):</strong></p>`
      challenges.forEach((challenge, i) => {
        html += `
          <div class="challenge">
            <strong>${i + 1}. ${challenge.title}</strong>
            <p>${challenge.empathy}</p>
            <small>${challenge.actions.length} actions available</small>
          </div>
        `
      })
      resultDiv.innerHTML = html
    }

    window.testDeadlinePressure = async () => {
      console.log('üß™ Testing: Deadline Pressure')
      const entry = createMockEntry([
        { description: 'Working on homepage redesign', emotion: 6, notes: 'Feeling stressed about the deadline pressure' }
      ])
      const challenges = await matchChallengesToInput(entry)
      console.log('Results:', challenges)
      displayResults(challenges, 'result1')
    }

    window.testCursorFrustration = async () => {
      console.log('üß™ Testing: Cursor Frustration')
      const entry = createMockEntry([
        { description: 'Building component library with Cursor', emotion: 4, notes: 'Hard to control Cursor, keeps giving wrong results' }
      ])
      const challenges = await matchChallengesToInput(entry)
      console.log('Results:', challenges)
      displayResults(challenges, 'result2')
    }

    window.testStuck = async () => {
      console.log('üß™ Testing: Stuck on Problem')
      const entry = createMockEntry([
        { description: 'Trying to design the checkout flow', emotion: 4, notes: 'Feeling stuck and no progress today' }
      ])
      const challenges = await matchChallengesToInput(entry)
      console.log('Results:', challenges)
      displayResults(challenges, 'result3')
    }
  </script>
</body>
</html>

