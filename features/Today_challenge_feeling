# Today's Challenges - Feel Tab Feature

## What It Does

The "Feel" tab in the Today's Challenges bottom sheet shows insights and resources that help users understand and process their emotional struggles. It filters coping suggestions to show only reflective, learning-oriented content.

**Visual Display:**
- Tab label: "Feel"
- Default active tab (opens first)
- Shows suggestions with icons and descriptions
- Scrollable list of insights and resources
- Each item can have external links

## User-Facing Behavior

1. **User taps challenge card** (e.g., "Deadline pressure feels intense")
2. **Bottom sheet opens** with Feel tab active by default
3. **Shows two types of content:**
   - **ğŸ§  Insights** - Reflective perspectives and mental frameworks
   - **ğŸ’¡ Resources** - Learning materials including:
     - ğŸ§ Podcasts (listen)
     - ğŸ“š Books (read)
     - ğŸ¥ Videos (watch)
     - ğŸ“„ Articles (read)
4. **User can tap external links** to open resources
5. **User can switch to Do tab** for action-oriented strategies

**Example:**
```
Fuzzy Prompts â†’ Fuzzy Results with AI Tools

[Feel] [Do]  â† Feel tab active (underlined/highlighted)

â€” Insights â€”

ğŸ§  Frame before you design
   Before opening your design tool, write a problem 
   statement and three user goals to anchor your work.

â€” Resources â€”

ğŸ§ Listen: Managing Design Stress (Podcast)
   Design Better Podcast episode on coping with pressure 
   without burning out.
   [Listen â†’]

ğŸ“š Read: The Obstacle Is the Way (Book)
   Ryan Holiday's guide to reframing obstacles into 
   momentum-building constraints.

ğŸ¥ Watch: Prompt Engineering for Designers (Video)
   A 10-minute primer on structuring effective prompts.
   [Watch â†’]
```

## Technical Implementation

### Core Logic Location
- **Component**: `src/components/HelpfulResourcesCard.tsx` (lines 113-129)
- **Filtering logic**: Inline filter based on suggestion type
- **Data source**: Challenge.suggestions array

### How It Works

#### 1. Filter Suggestions by Type

```typescript
const feelSuggestions = selectedChallenge?.suggestions.filter(
  suggestion =>
    suggestion.type === 'podcast' ||
    suggestion.type === 'book' ||
    suggestion.type === 'insight' ||
    suggestion.type === 'video' ||     // Added
    suggestion.type === 'resource'     // Added
) ?? []
```

**Included types** (Feel tab):
- `insight` - Reflective perspectives
- `podcast` - Audio episodes
- `book` - Books/articles
- `video` - Video content
- `resource` - Other learning materials

**Excluded types** (shown in Do tab):
- `action` - Practical steps
- `tool` - Software/templates
- `strategy` - Approaches/methods

#### 2. Fallback Logic

```typescript
const fallbackSuggestions = selectedChallenge?.suggestions ?? []
const feelList = feelSuggestions.length > 0 ? feelSuggestions : fallbackSuggestions
```

**If no Feel-type suggestions exist:**
- Shows all suggestions as fallback
- Prevents empty tab

#### 3. Render Suggestions

**For each suggestion:**
```jsx
<div className="flex items-start gap-3">
  <span className="text-2xl">{icon}</span>  {/* Emoji based on type */}
  <div>
    <h4 className="font-semibold">{suggestion.title}</h4>
    <p className="text-gray">{suggestion.description}</p>
    {suggestion.url && <a href={suggestion.url}>View â†’</a>}
  </div>
</div>
```

## Suggestion Type Icons

**Feel tab icons:**
- ğŸ§  Insight
- ğŸ§ Podcast
- ğŸ“š Book
- ğŸ¥ Video (if implemented)
- ğŸ’¡ Resource

**Determined by:**
```typescript
const getSuggestionIcon = (type: string): string => {
  switch (type) {
    case 'insight': return 'ğŸ§ '
    case 'podcast': return 'ğŸ§'
    case 'book': return 'ğŸ“š'
    case 'resource': return 'ğŸ’¡'
    default: return 'ğŸ’¡'
  }
}
```

## Example Feel Suggestions

### Insight Type
```
ğŸ§  Define your point of view
   Write one sentence about what only you believe good 
   design should achieve to clarify your signature value.
```

### Podcast Type
```
ğŸ§ Managing design stress
   Design Better Podcast episode on coping with pressure 
   without burning out.
   [Listen â†’]
```

### Book Type
```
ğŸ“š The Obstacle Is the Way
   Ryan Holiday's guide to reframing obstacles into 
   momentum-building constraints.
```

### Resource Type
```
ğŸ’¡ Read: Cursor Tips & Tricks
   Community-sourced guide to getting better results from 
   Cursor with clear prompt patterns.
   [View â†’]
```

## Key Files

1. **`src/components/HelpfulResourcesCard.tsx`** (lines 113-129)
   - Feel tab filtering logic
   - Suggestion type categorization
   - Icon mapping

2. **`src/data/challengeRecommendations.ts`**
   - Challenge templates with suggestions
   - Each suggestion has a `type` field
   - Examples of Feel-type content

## Edge Cases

- **Challenge always has suggestions**: Every challenge includes both Feel and Do content
- **Unbalanced suggestions**: More Feel than Do (or vice versa) is fine - shows what exists
- **Challenge has mixed suggestions**: Each tab shows its filtered subset
- **Suggestion without URL**: No link shown, just text
- **Very long description**: Wraps naturally (no truncation)
- **Unknown suggestion type**: Uses default icon (ğŸ’¡)

## Performance

- âš¡ **Instant filtering** - O(n) where n = suggestion count (typically 3-6)
- ğŸ’¾ **No storage** - Computed from props
- ğŸ¨ **Smooth transitions** - Tab switch is instant

## Design Decisions

### Why Default to Feel Tab?

**Reasoning:**
- âœ… **Emotional first** - Users clicked because they're struggling
- âœ… **Understanding before action** - Process feelings first
- âœ… **Reflection is valuable** - Not everything needs immediate action
- âœ… **Gentle approach** - Less pressuring than "Do this now!"

**User can always switch** to Do tab if they want action immediately.

### Why Group Podcasts/Books/Videos Together?

**All are "consuming content" activities:**
- Similar time commitment (passive consumption)
- Similar mindset (learning/reflecting)
- Different from doing/building

**Clearer than:**
- Having 5 separate categories
- Random mixing of types

## Integration Testing

### Test Strategy

Integration tests verify **both Feel and Do tab filtering logic** works correctly:

1. **Type Filtering** - Correct suggestions filtered to Feel tab (insights, resources)
2. **Type Filtering** - Correct suggestions filtered to Do tab (actions, tools, strategies)
3. **Icon Mapping** - Correct icons for each type
4. **Mixed Suggestions** - Properly separates Feel vs Do (no overlap)
5. **Balanced Suggestions** - Equal Feel and Do content
6. **Unbalanced Suggestions** - More of one type than the other

### Test Scenarios

**Scenario 1: Challenge with Mixed Suggestions**
- Input: Challenge with 2 insights, 1 podcast, 2 actions, 1 tool
- Expected Feel: 3 items (2 insights + 1 podcast)
- Expected Do: 3 items (2 actions + 1 tool)

**Scenario 2: Challenge with Balanced Suggestions**
- Input: Challenge with 2 insights, 2 actions
- Expected Feel: 2 insights
- Expected Do: 2 actions

**Scenario 3: Challenge with More Feel Than Do**
- Input: Challenge with 3 Feel items, 1 Do item
- Expected Feel: 3 items
- Expected Do: 1 item

**Scenario 4: All Suggestion Types**
- Input: Challenge with all 8 suggestion types
- Expected Feel: 5 items (insight, podcast, book, video, resource)
- Expected Do: 3 items (action, tool, strategy)

### Running Integration Tests

```bash
# Run all Feel & Do tab filtering tests
npx tsx test-feel-tab-filtering.ts

# Run specific scenario
npx tsx test-feel-tab-filtering.ts "Challenge with Mixed Suggestions"
npx tsx test-feel-tab-filtering.ts "Challenge with Balanced Suggestions"

# Show help
npx tsx test-feel-tab-filtering.ts --help
```

### What Gets Tested

âœ… **Real production code** - Uses actual filtering logic from HelpfulResourcesCard  
âœ… **No mocks** - Tests complete suggestion filtering  
âœ… **Feel tab filtering** - Validates insights, podcasts, books, videos, resources  
âœ… **Do tab filtering** - Validates actions, tools, strategies  
âœ… **Type categorization** - Validates Feel vs Do split (no overlap)  
âœ… **Icon mapping** - Confirms correct icons for all types  
âœ… **Balanced content** - Tests equal Feel/Do distribution  
âœ… **Unbalanced content** - Tests when one type dominates

### Test Output Example

```
============================================================
Testing: Challenge with Mixed Suggestions
============================================================

ğŸ“ Input:
   Challenge: "Deadline pressure feels intense"
   Total suggestions: 6
     - 2 insights (ğŸ§ )
     - 1 podcast (ğŸ§)
     - 2 actions (âœ…)
     - 1 tool (ğŸ› ï¸)

ğŸ“Š Filtering Results:

Feel Tab:
   Filtered to: 3 suggestions
     1. ğŸ§  Insight: "Reset the plan"
     2. ğŸ§  Insight: "Write three priorities"
     3. ğŸ§ Podcast: "Managing design stress"

Do Tab:
   Filtered to: 3 suggestions
     1. âœ… Action: "Set a focus timer"
     2. âœ… Action: "Block 10 minutes"
     3. ğŸ› ï¸ Tool: "Daily reset checklist"

âœ… Result:
   Feel suggestions: 3 âœ…
   Do suggestions: 3 âœ…
   Correct types in each tab: YES âœ…
   No overlap between tabs: YES âœ…
```

### No External Dependencies

Like other feature tests:
- âŒ **No API calls** - Pure filtering logic
- âŒ **No API keys** - Works immediately
- âŒ **No network** - Client-side only
- âœ… **Instant execution** - Runs in milliseconds
- âœ… **Deterministic** - Same suggestions = same filtering

